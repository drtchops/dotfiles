#!/bin/bash

function pu_dir
{
	DIR=$1
	cd $DIR
	pwd
	for d in *; do
	    if [[ -d "$DIR/$d" ]]; then
    	    cd "$DIR/$d"
        	if [[ -e ".hg" ]]; then
            	echo "--- $d"
            	if [[ "`hg status`" == "" ]]; then
                	hg pull -u
            	else
                	echo "Pending changes, will not pull."
            	fi
        	fi
    	fi
	done
}

pu_dir /apps
pu_dir /apps/branches

